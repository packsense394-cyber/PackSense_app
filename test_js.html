<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { padding: 10px 20px; margin: 10px; font-size: 16px; }
        .test-btn { background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .cooccurrence-btn { background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .defect-btn { background: #ffc107; color: black; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>JavaScript Functionality Test</h1>
    
    <button class="test-btn" onclick="testJavaScript()">Test JavaScript</button>
    <button class="cooccurrence-btn" onclick="showCooccurrenceNetwork()">Test Co-occurrence</button>
    <button class="defect-btn" onclick="markDefectiveParts()">Test Defect Analysis</button>
    
    <div id="output"></div>

    <script>
        // Test function to verify JavaScript is working
        function testJavaScript() {
            alert('JavaScript is working!');
            console.log('JavaScript test function called');
            document.getElementById('output').innerHTML = '<p>✓ JavaScript is working!</p>';
        }
        
        // Co-occurrence network test
        function showCooccurrenceNetwork() {
            console.log('showCooccurrenceNetwork function called!');
            alert('Co-occurrence function called!');
            
            // Test with sample data
            const cooccurrenceData = {
                "packaging": {"pack": 58, "container": 45},
                "pack": {"packaging": 58, "bottle": 23},
                "container": {"packaging": 45, "leak": 12}
            };
            
            if (!cooccurrenceData || Object.keys(cooccurrenceData).length === 0) {
                alert('No co-occurrence data available for this analysis.');
                return;
            }
            
            // Create modal for co-occurrence visualization
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 15px;
                padding: 30px;
                max-width: 90%;
                max-height: 90%;
                overflow-y: auto;
                position: relative;
            `;
            
            // Close button
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '&times;';
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 15px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #666;
            `;
            closeBtn.onclick = () => document.body.removeChild(modal);
            
            // Title
            const title = document.createElement('h2');
            title.textContent = 'Co-occurrence Network Analysis (Test)';
            title.style.cssText = `
                margin: 0 0 20px 0;
                color: #333;
                text-align: center;
            `;
            
            // Sample data display
            const dataDisplay = document.createElement('div');
            dataDisplay.innerHTML = `
                <h3>Sample Co-occurrence Data:</h3>
                <ul>
                    <li>packaging ↔ pack: 58 times</li>
                    <li>packaging ↔ container: 45 times</li>
                    <li>pack ↔ bottle: 23 times</li>
                    <li>container ↔ leak: 12 times</li>
                </ul>
            `;
            
            modalContent.appendChild(closeBtn);
            modalContent.appendChild(title);
            modalContent.appendChild(dataDisplay);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            document.getElementById('output').innerHTML = '<p>✓ Co-occurrence modal created successfully!</p>';
        }

        // Mark defective parts test
        function markDefectiveParts() {
            console.log('markDefectiveParts function called!');
            alert('Defect function called!');
            
            // Test with sample data
            const defectPairs = [
                ["package", "leak"],
                ["container", "damage"],
                ["bottle", "broken"],
                ["cap", "loose"]
            ];
            
            if (!defectPairs || defectPairs.length === 0) {
                alert('No defects detected in this analysis.');
                return;
            }
            
            // Create modal for defect visualization
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 15px;
                padding: 30px;
                max-width: 90%;
                max-height: 90%;
                overflow-y: auto;
                position: relative;
            `;
            
            // Close button
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '&times;';
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 15px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #666;
            `;
            closeBtn.onclick = () => document.body.removeChild(modal);
            
            // Title
            const title = document.createElement('h2');
            title.textContent = 'Defect Analysis Results (Test)';
            title.style.cssText = `
                margin: 0 0 20px 0;
                color: #333;
                text-align: center;
            `;
            
            // Summary
            const summary = document.createElement('div');
            summary.style.cssText = `
                background: #fff3cd;
                border: 1px solid #ffeaa7;
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 20px;
                text-align: center;
            `;
            summary.innerHTML = `
                <strong>${defectPairs.length} defect relationships detected</strong><br>
                <small>Component-Condition pairs found in reviews</small>
            `;
            
            // Defect pairs visualization
            const defectContainer = document.createElement('div');
            defectContainer.style.cssText = `
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 15px;
            `;
            
            defectPairs.forEach((pair, index) => {
                const defectCard = document.createElement('div');
                defectCard.style.cssText = `
                    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
                    color: white;
                    padding: 20px;
                    border-radius: 12px;
                    text-align: center;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                `;
                
                defectCard.innerHTML = `
                    <div style="position: absolute; top: 10px; right: 15px; background: rgba(255,255,255,0.2); border-radius: 50%; width: 25px; height: 25px; display: flex; align-items: center; justify-content: center; font-size: 0.8em; font-weight: bold;">${index + 1}</div>
                    <div style="font-size: 1.2em; font-weight: bold; margin-bottom: 10px;">${pair[0]}</div>
                    <div style="font-size: 1.5em; margin: 10px 0;">↓</div>
                    <div style="font-size: 1.1em; opacity: 0.9;">${pair[1]}</div>
                `;
                
                defectContainer.appendChild(defectCard);
            });
            
            modalContent.appendChild(closeBtn);
            modalContent.appendChild(title);
            modalContent.appendChild(summary);
            modalContent.appendChild(defectContainer);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            document.getElementById('output').innerHTML = '<p>✓ Defect analysis modal created successfully!</p>';
        }
    </script>
</body>
</html>
